"use strict";!function(){var a=20,n=1,i=document.querySelector(".list-group"),r=document.querySelector(".pagination"),l=[],s=0;function o(e){i.innerHTML="";for(var t=0;t<e.length;t++){var a=e[t],n='\n            <li class="sk_goods">\n                <a href="../html/detail.html?id='+a.goods_id+'&a=1">\n                    <img src="'+a.hd_thumb_url+'" alt="">\n                    <h5 class="sk_goods_title">'+a.goods_name+'</h5>\n                </a>\n                <p class="sk_goods_price"><em>￥'+a.group_price/100+"</em> <del>￥"+a.group_price_origin/100+'</del></p>\n                <a data-id="'+a.goods_id+'" class="sk_goods_buy addToCart">加入购物车</a>\n            </li>\n            ';i.innerHTML+=n}}function u(e){var t='<li>\n                <a aria-label="Previous">\n                    <span class=\'leftBtn\' aria-hidden="true">&laquo;</span>\n                </a>\n            </li>';if(e<=6)for(var a=0;a<10;a++)t+="<li><a class='num'>"+(a+1)+"</a></li>";else{var n=s<e+4?s:e+4;for(a=e-6;a<n;a++)t+="<li><a class='num'>"+(a+1)+"</a></li>"}t+=' <li>\n            <a  aria-label="Next">\n                <span class=\'rightBtn\' aria-hidden="true">&raquo;</span>\n            </a>\n        </li>',r.innerHTML=t}pAjax({url:"/phone?tf_id=TFM00R0_256&page=1&size=100"}).then(function(e){if((e=JSON.parse(e)).result){for(var t=0;t<e.result.length;t++)e.result[t].sales=0;localStorage.setItem("shoppingCartInfoo",JSON.stringify(e.result)),l=e.result,o(e.result.slice(n*a,n*a+a)),s=Math.ceil(l.length/10),u(n)}}),r.onclick=function(e){if("leftBtn"===e.target.className){if(--n<0)return void(n=0);o(l.slice(n*a,n*a+a)),u(n)}else if("rightBtn"===e.target.className){if(s<++n)return void(n=s);o(l.slice(n*a,n*a+a)),u(n)}else if("num"===e.target.className){if(n===e.target.innerHTML-1)return;n=e.target.innerHTML-1,o(l.slice(n*a,n*a+a)),u(n)}},document.querySelector(".list-group").onclick=function(e){if(getCookie("登录成功")||(alert("请先登录"),location.href="../html/login.html"),e.target.className.includes("addToCart")){var t=e.target.getAttribute("data-id"),a=JSON.parse(localStorage.getItem("shoppingCart"))||[],n=a.find(function(e){return e.goods_id==t});n?n.number++:((n=l.find(function(e){return e.goods_id==t})).number=1,a.push(n)),localStorage.setItem("shoppingCart",JSON.stringify(a))}}}();